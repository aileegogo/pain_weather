<div style="max-width: 600px; margin: 0 auto; padding: 20px; font-family: 'Pretendard', sans-serif;">
  <h1 style="text-align: center; color: #0f172a;">🌤️ AI 기상-건강 대시보드</h1>
  
  <form action="/" method="get" style="display: flex; gap: 10px; margin-bottom: 20px;">
    <input type="text" name="city" placeholder="도시명 입력" value="<%= @city_ko %>" style="flex: 1; padding: 12px; border-radius: 10px; border: 1px solid #ddd;">
    <button type="submit" style="padding: 10px 20px; background: #10b981; color: white; border: none; border-radius: 10px; cursor: pointer;">분석</button>
  </form>

  <% if @weather %>
    <div style="background: white; padding: 20px; border-radius: 20px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); border-left: 8px solid <%= @weather.temp_color %>; margin-bottom: 15px;">
      <p style="color: #64748b; margin: 0;">현재 기온</p>
      <h2 style="font-size: 3rem; margin: 5px 0;"><%= @weather.temp %>°C</h2>
      <p style="color: <%= @weather.temp_color %>; font-weight: bold;"><%= @weather.temp_alert %></p>
    </div>

    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 20px;">
      <div style="background: white; padding: 15px; border-radius: 15px; border-left: 5px solid <%= @weather.humi_color %>;">
        <p style="font-size: 0.8rem; color: #64748b;">습도: <%= @weather.humidity %>%</p>
        <p style="font-size: 0.8rem; color: <%= @weather.humi_color %>; font-weight: bold;"><%= @weather.humi_alert %></p>
      </div>
      <div style="background: white; padding: 15px; border-radius: 15px; border-left: 5px solid #94a3b8;">
        <p style="font-size: 0.8rem; color: #64748b;">기압: 1013hPa</p>
        <p style="font-size: 0.8rem; color: #94a3b8;">표준기압</p>
      </div>
    </div>

    <div style="background: #f1f5f9; padding: 20px; border-radius: 15px;">
      <h3 style="margin-top: 0;">🧠 AI 건강 리포트</h3>
      <div id="report-text" style="white-space: pre-wrap; line-height: 1.6; color: #334155;"><%= @weather.ai_content %></div>
      <button onclick="copyReport()" style="width: 100%; margin-top: 15px; padding: 10px; background: #10b981; color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: bold;">본문 내용 복사</button>
    </div>
  <% else %>
    <p style="text-align: center; color: #ef4444;">날씨 데이터를 가져올 수 없습니다. 도시명을 확인해 주세요.</p>
  <% end %>
</div>

<script>
  function copyReport() {
    const text = document.getElementById('report-text').innerText;
    navigator.clipboard.writeText(text).then(() => alert("리포트가 복사되었습니다!"));
  }
</script>